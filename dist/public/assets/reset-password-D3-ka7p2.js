import{u as V,a as y,r as t,j as e,A as m,C as w,b,c as P,L as u,B as d,d as S,e as g,I as C,E as j,f as D}from"./index-DClCG_Fx.js";function R(){V();const{toast:l}=y(),[p,i]=t.useState(!1),[K,v]=t.useState(""),[r,k]=t.useState({newPassword:"",confirmPassword:""}),[n,E]=t.useState({newPassword:!1,confirmPassword:!1}),[h,o]=t.useState("pending"),[A,c]=t.useState("");t.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("token");s?v(s):(o("error"),c("Invalid reset link. Please request a new password reset."))},[]);const U=async a=>{if(a.preventDefault(),i(!0),r.newPassword!==r.confirmPassword){l({variant:"destructive",title:"Error",description:"Passwords do not match"}),i(!1);return}if(r.newPassword.length<8){l({variant:"destructive",title:"Error",description:"Password must be at least 8 characters long"}),i(!1);return}try{const s=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:K,newPassword:r.newPassword})}),f=await s.json();s.ok?(o("success"),l({title:"Success",description:"Your password has been reset successfully!"})):(o("error"),c(f.message||"Failed to reset password"),l({variant:"destructive",title:"Error",description:f.message||"Failed to reset password"}))}catch{o("error"),c("Something went wrong. Please try again."),l({variant:"destructive",title:"Error",description:"Something went wrong. Please try again."})}finally{i(!1)}},N=a=>{k({...r,[a.target.name]:a.target.value})},x=a=>{E(s=>({...s,[a]:!s[a]}))};return h==="success"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(m,{currentPage:""},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV("section",{className:"py-16",children:e.jsxDEV("div",{className:"max-w-md mx-auto px-4 sm:px-6",children:e.jsxDEV(w,{className:"text-center",children:e.jsxDEV(b,{className:"pt-6",children:[e.jsxDEV("div",{className:"mx-auto w-16 h-16 flex items-center justify-center bg-green-100 rounded-full mb-4",children:e.jsxDEV(P,{className:"w-8 h-8 text-green-600"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:127,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Password Reset Successful"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Your password has been updated successfully."},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV(u,{href:"/login",children:e.jsxDEV(d,{className:"bg-finder-red hover:bg-finder-red-dark text-white",children:"Continue to Login"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:132,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:131,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:125,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:124,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:123,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:122,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:120,columnNumber:7},this):h==="error"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(m,{currentPage:""},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:147,columnNumber:9},this),e.jsxDEV("section",{className:"py-16",children:e.jsxDEV("div",{className:"max-w-md mx-auto px-4 sm:px-6",children:e.jsxDEV(w,{className:"text-center",children:e.jsxDEV(b,{className:"pt-6",children:[e.jsxDEV("div",{className:"mx-auto w-16 h-16 flex items-center justify-center bg-red-100 rounded-full mb-4",children:e.jsxDEV(S,{className:"w-8 h-8 text-red-600"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:153,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:152,columnNumber:17},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reset Link Invalid"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:155,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:A},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:156,columnNumber:17},this),e.jsxDEV(u,{href:"/login",children:e.jsxDEV(d,{className:"bg-finder-red hover:bg-finder-red-dark text-white",children:"Back to Login"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:158,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:157,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:151,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:150,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:149,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:146,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(m,{currentPage:""},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:172,columnNumber:7},this),e.jsxDEV("section",{className:"py-8 sm:py-16",children:e.jsxDEV("div",{className:"max-w-md mx-auto px-4 sm:px-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:178,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-600",children:"Enter your new password below"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:179,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:177,columnNumber:13},this),e.jsxDEV("form",{onSubmit:U,className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV(g,{htmlFor:"newPassword",className:"text-gray-700 font-medium",children:"New Password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:184,columnNumber:17},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(C,{id:"newPassword",name:"newPassword",type:n.newPassword?"text":"password",required:!0,value:r.newPassword,onChange:N,className:"pr-12",placeholder:"Enter new password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:188,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>x("newPassword"),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:n.newPassword?e.jsxDEV(j,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:203,columnNumber:50},this):e.jsxDEV(D,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:203,columnNumber:83},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:198,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:187,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(g,{htmlFor:"confirmPassword",className:"text-gray-700 font-medium",children:"Confirm New Password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:209,columnNumber:17},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(C,{id:"confirmPassword",name:"confirmPassword",type:n.confirmPassword?"text":"password",required:!0,value:r.confirmPassword,onChange:N,className:"pr-12",placeholder:"Confirm new password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:213,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>x("confirmPassword"),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:n.confirmPassword?e.jsxDEV(j,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:228,columnNumber:54},this):e.jsxDEV(D,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:228,columnNumber:87},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:223,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:212,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:208,columnNumber:15},this),e.jsxDEV(d,{type:"submit",className:"w-full bg-finder-red hover:bg-finder-red-dark text-white py-3 font-medium",disabled:p,children:p?"Resetting...":"Reset Password"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:182,columnNumber:13},this),e.jsxDEV("div",{className:"text-center mt-6",children:e.jsxDEV(u,{href:"/login",className:"text-sm text-gray-500 hover:text-finder-red",children:"Back to Login"},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:243,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:242,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:176,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:175,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:174,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/450/Desktop/KK/AlajaClean/client/src/pages/auth/reset-password.tsx",lineNumber:171,columnNumber:5},this)}export{R as default};
